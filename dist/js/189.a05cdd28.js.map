{"version":3,"file":"js/189.a05cdd28.js","mappings":"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","sources":["webpack://event/./src/views/artcle/artList.vue","webpack://event/src/views/artcle/artList.vue","webpack://event/./src/views/artcle/artList.vue?0ffe","webpack://event/./src/views/artcle/artList.vue?e247"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-card',[_c('div',{staticStyle:{\"font-size\":\"20px\",\"font-weight\":\"bold\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\" 文章列表 \")]),_c('div',{staticClass:\"container\"},[_c('el-form',{ref:\"filterForm\",attrs:{\"label-width\":\"80px\",\"inline\":\"\",\"model\":_vm.formData}},[_c('el-form-item',{attrs:{\"label\":\"文章分类\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择分类\"},model:{value:(_vm.formData.cate_id),callback:function ($$v) {_vm.$set(_vm.formData, \"cate_id\", $$v)},expression:\"formData.cate_id\"}},_vm._l((_vm.ArtcleList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.cate_name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"发布状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择状态\"},model:{value:(_vm.formData.state),callback:function ($$v) {_vm.$set(_vm.formData, \"state\", $$v)},expression:\"formData.state\"}},[_c('el-option',{attrs:{\"label\":\"已发布\",\"value\":\"已发布\"}}),_c('el-option',{attrs:{\"label\":\"草稿\",\"value\":\"草稿\"}})],1)],1),[_c('el-button',{on:{\"click\":_vm.filterFn}},[_vm._v(\"筛选\")]),_c('el-button',{on:{\"click\":_vm.resetFn}},[_vm._v(\"重置\")])]],2),_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"发表文章\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.artcles.data}},[_c('el-table-column',{attrs:{\"label\":\"文章标题\",\"prop\":\"title\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.artcleDetail(scope.row.id)}}},[_vm._v(_vm._s(scope.row.title))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"文章分类\",\"prop\":\"cate_name\"}}),_c('el-table-column',{attrs:{\"label\":\"发布时间\",\"prop\":\"pub_date\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.$formatDate(scope.row.pub_date)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"prop\":\"state\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{on:{\"click\":function($event){return _vm.deleteArtcle(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{staticStyle:{\"text-align\":\"center\"},attrs:{\"current-page\":_vm.formData.pagenum,\"page-sizes\":[5, 10, 15, 20],\"page-size\":_vm.formData.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.artcles.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){return _vm.$set(_vm.formData, \"pagenum\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.formData, \"pagenum\", $event)},\"update:pageSize\":function($event){return _vm.$set(_vm.formData, \"pagesize\", $event)},\"update:page-size\":function($event){return _vm.$set(_vm.formData, \"pagesize\", $event)}}})],1),_c('el-dialog',{attrs:{\"title\":\"发表文章\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose,\"fullscreen\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.dialogCloseFn}},[_c('el-form',{ref:\"pubFormRef\",attrs:{\"model\":_vm.pubForm,\"rules\":_vm.pubFormRules,\"label-width\":\"100px\"}},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"left\"},[_c('el-form-item',{attrs:{\"label\":\"文章封面\"}},[_c('img',{ref:\"coverImg\",attrs:{\"src\":require(\"../../assets//images/cover.jpg\"),\"alt\":\"\"},on:{\"click\":_vm.selCover}}),_c('input',{ref:\"cover\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.chooseCover}})])],1),_c('div',{staticClass:\"right\"},[_c('el-form-item',{attrs:{\"label\":\"文章标题\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入标题\"},model:{value:(_vm.pubForm.title),callback:function ($$v) {_vm.$set(_vm.pubForm, \"title\", $$v)},expression:\"pubForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文章分类\",\"prop\":\"cate_id\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择分类\"},model:{value:(_vm.pubForm.cate_id),callback:function ($$v) {_vm.$set(_vm.pubForm, \"cate_id\", $$v)},expression:\"pubForm.cate_id\"}},_vm._l((_vm.ArtcleList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.cate_name,\"value\":item.id}})}),1)],1),_c('div',{staticClass:\"btns\"},[_c('el-button',{on:{\"click\":function($event){return _vm.operationFn('已发布')}}},[_vm._v(\"发布\")]),_c('el-button',{on:{\"click\":function($event){return _vm.operationFn('草稿')}}},[_vm._v(\"存为草稿\")])],1)],1)]),_c('el-form-item',{attrs:{\"label\":\"文章内容\",\"prop\":\"content\"}},[_c('quill-editor',{on:{\"change\":_vm.contentChangeFn},model:{value:(_vm.pubForm.content),callback:function ($$v) {_vm.$set(_vm.pubForm, \"content\", $$v)},expression:\"pubForm.content\"}})],1)],1)],1),_c('el-dialog',{staticClass:\"detail\",attrs:{\"title\":\"文章预览\",\"visible\":_vm.detailVisible,\"width\":\"80%\",\"top\":\"20px\"},on:{\"update:visible\":function($event){_vm.detailVisible=$event}}},[_c('h1',[_vm._v(_vm._s(_vm.detailArtcle.title))]),_c('div',[_c('span',[_vm._v(\"作者:\"+_vm._s(_vm.detailArtcle.nickname || _vm.detailArtcle.username))]),_c('span',[_vm._v(\"发布时间:\"+_vm._s(_vm.$formatDate(_vm.detailArtcle.pub_date)))]),_c('span',[_vm._v(\"所属分类:\"+_vm._s(_vm.detailArtcle.cate_name))]),_c('span',[_vm._v(\"状态:\"+_vm._s(_vm.detailArtcle.state))])]),_c('el-divider'),_c('img',{attrs:{\"src\":_vm.baseURL+_vm.detailArtcle.cover_img,\"alt\":\"\"}}),_c('div',{staticStyle:{\"text-indent\":\"2em\"},domProps:{\"innerHTML\":_vm._s(_vm.detailArtcle.content)}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card>\r\n      <div slot=\"header\" style=\"font-size: 20px; font-weight: bold\">\r\n        文章列表\r\n      </div>\r\n      <div class=\"container\">\r\n        <el-form label-width=\"80px\" inline :model=\"formData\" ref=\"filterForm\">\r\n          <el-form-item label=\"文章分类\">\r\n            <el-select placeholder=\"请选择分类\" v-model=\"formData.cate_id\">\r\n              <el-option\r\n                v-for=\"item in ArtcleList\"\r\n                :key=\"item.id\"\r\n                :label=\"item.cate_name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"发布状态\">\r\n            <el-select placeholder=\"请选择状态\" v-model=\"formData.state\">\r\n              <el-option label=\"已发布\" value=\"已发布\"></el-option>\r\n              <el-option label=\"草稿\" value=\"草稿\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <template>\r\n            <el-button @click=\"filterFn\">筛选</el-button>\r\n            <el-button @click=\"resetFn\">重置</el-button>\r\n          </template>\r\n        </el-form>\r\n        <el-button @click=\"dialogVisible = true\">发表文章</el-button>\r\n      </div>\r\n      <el-table :data=\"artcles.data\" style=\"width: 100%; margin-top: 20px\">\r\n        <el-table-column label=\"文章标题\" prop=\"title\">\r\n          <template v-slot=\"scope\">\r\n            <el-link type=\"primary\" @click=\"artcleDetail(scope.row.id)\">{{scope.row.title}}</el-link>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"文章分类\" prop=\"cate_name\"></el-table-column>\r\n        <el-table-column label=\"发布时间\" prop=\"pub_date\">\r\n          <template v-slot=\"scope\">\r\n            <span>{{ $formatDate(scope.row.pub_date) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"状态\" prop=\"state\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template v-slot=\"scope\">\r\n            <el-button @click=\"deleteArtcle(scope.row.id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination style=\"text-align:center\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page.sync=\"formData.pagenum\"\r\n        :page-sizes=\"[5, 10, 15, 20]\"\r\n        :page-size.sync=\"formData.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"artcles.total\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n    <!-- 发布文章的对话框 -->\r\n    <el-dialog\r\n      title=\"发表文章\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"30%\"\r\n      :before-close=\"handleClose\"\r\n      @close=\"dialogCloseFn\"\r\n      fullscreen\r\n    >\r\n      <el-form\r\n        :model=\"pubForm\"\r\n        :rules=\"pubFormRules\"\r\n        ref=\"pubFormRef\"\r\n        label-width=\"100px\"\r\n      >\r\n        <!--  -->\r\n        <div class=\"top\">\r\n          <div class=\"left\">\r\n            <el-form-item label=\"文章封面\">\r\n              <img\r\n                src=\"../../assets//images/cover.jpg\"\r\n                alt=\"\"\r\n                @click=\"selCover\"\r\n                ref=\"coverImg\"\r\n              />\r\n              <input type=\"file\" ref=\"cover\" @change=\"chooseCover\" />\r\n            </el-form-item>\r\n          </div>\r\n          <div class=\"right\">\r\n            <el-form-item label=\"文章标题\" prop=\"title\">\r\n              <el-input\r\n                v-model=\"pubForm.title\"\r\n                placeholder=\"请输入标题\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"文章分类\" prop=\"cate_id\">\r\n              <el-select\r\n                v-model=\"pubForm.cate_id\"\r\n                placeholder=\"请选择分类\"\r\n                style=\"width: 100%\"\r\n              >\r\n                <el-option\r\n                  :label=\"item.cate_name\"\r\n                  :value=\"item.id\"\r\n                  v-for=\"item in ArtcleList\"\r\n                  :key=\"item.id\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <div class=\"btns\">\r\n              <el-button @click=\"operationFn('已发布')\">发布</el-button>\r\n              <el-button @click=\"operationFn('草稿')\">存为草稿</el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <el-form-item label=\"文章内容\" prop=\"content\">\r\n          <!-- 使用 v-model 进行双向的数据绑定 -->\r\n          <quill-editor\r\n            v-model=\"pubForm.content\"\r\n            @change=\"contentChangeFn\"\r\n          ></quill-editor>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n    <!-- 文章详情对话框 -->\r\n    <el-dialog title=\"文章预览\" :visible.sync=\"detailVisible\" class=\"detail\" width=\"80%\" top=\"20px\">\r\n        <h1>{{detailArtcle.title}}</h1>\r\n        <div>\r\n          <span>作者:{{detailArtcle.nickname || detailArtcle.username}}</span>\r\n          <span>发布时间:{{$formatDate(detailArtcle.pub_date)}}</span>\r\n          <span>所属分类:{{detailArtcle.cate_name}}</span>\r\n          <span>状态:{{detailArtcle.state}}</span>\r\n        </div>\r\n        <el-divider></el-divider>\r\n        <img :src=\"baseURL+detailArtcle.cover_img\" alt=\"\">\r\n        <div v-html=\"detailArtcle.content\" style=\"text-indent:2em\"></div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArtcleData, uploadArticleAPI, getArtclesAPI,getArtcleDetailAPI,deleteArtcleAPI} from \"@/api\";\r\nimport coverImg from \"@/assets/images/cover.jpg\";\r\nimport {baseURL} from '@/utils/request'\r\nexport default {\r\n  name: \"artList\",\r\n  data() {\r\n    return {\r\n      baseURL : baseURL,\r\n      //   控制发表文章对话框显示和隐藏\r\n      dialogVisible: false,\r\n      //  控制文章预览对话框显示和隐藏\r\n      detailVisible:false,\r\n      // 单个文章详情\r\n      detailArtcle:{},\r\n      // 主页查询的表单数据\r\n      formData: {\r\n        pagenum: 1, //当前页码数\r\n        pagesize: 5, // 每页展示的条数\r\n        cate_id: \"\", // 文章分类\r\n        state: \"\", // 状态\r\n      },\r\n      // 所有文章列表数据\r\n      artcles: {},\r\n      pubForm: {\r\n        // 新建文章的表单的数据对象\r\n        title: \"\", //文章标题\r\n        cate_id: \"\", //文章分类\r\n        content: \"\", //文章内容\r\n        cover_img: \"\", //文章封面\r\n        state: \"\", //文章状态\r\n      },\r\n      // 表单的验证规则对象\r\n      pubFormRules: {\r\n        title: [\r\n          { required: true, message: \"请输入文章标题\", trigger: \"blur\" },\r\n          {\r\n            min: 1,\r\n            max: 30,\r\n            message: \"文章标题的长度为1-30个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        cate_id: [\r\n          { required: true, message: \"请选择文章标题\", trigger: \"change\" },\r\n        ],\r\n        content: [\r\n          { required: true, message: \"请输入文章内容\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      // 文章分类数据\r\n      ArtcleList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    // 对话框关闭前的回调\r\n    async handleClose(done) {\r\n      // 询问用户是否确认关闭对话框\r\n      const confirmResult = await this.$confirm(\r\n        \"此操作将导致文章信息丢失, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n\r\n      // 取消了关闭-阻止住, 什么都不干\r\n      if (confirmResult === \"cancel\") return;\r\n      // 确认关闭\r\n      done();\r\n    },\r\n    // 对话框关闭回调\r\n    dialogCloseFn() {\r\n      this.$refs.pubFormRef.resetFields();\r\n      this.pubForm.cover_img = '';\r\n      this.pubForm.content = \"\";\r\n      this.$refs.coverImg.setAttribute(\"src\", coverImg);\r\n    },\r\n    // 获取文章分类数据\r\n    async getArtcleList() {\r\n      const { data: res } = await getArtcleData();\r\n      this.ArtcleList = res.data;\r\n    },\r\n    // 点击选择封面时\r\n    selCover() {\r\n      // 触发选择文件的点击事件\r\n      this.$refs.cover.click()\r\n    },\r\n    // 更换封面时\r\n    chooseCover(e) {\r\n      const res = e.target.files;\r\n      if (res.length === 0) {\r\n        // 用户没有选择文件就使用默认的图片\r\n        this.$refs.coverImg.setAttribute(\"src\", coverImg);\r\n      } else {\r\n        this.pubForm.cover_img = res[0];\r\n        const url = URL.createObjectURL(res[0]); //将图片转换成file文件格式\r\n        this.$refs.coverImg.setAttribute(\"src\", url); //更换页面的图片\r\n      }\r\n    },\r\n    // 点击发布或草稿按钮时\r\n    async operationFn(state) {\r\n      // 1. 设置发布状态\r\n      this.pubForm.state = state;\r\n      // 2. 表单预校验\r\n      this.$refs.pubFormRef.validate(async (valid) => {\r\n        if (!valid) return this.$message.error(\"请完善文章信息！\");\r\n        // 3. 判断是否提供了文章封面\r\n        if (!this.pubForm.cover_img)\r\n          return this.$message.error(\"请选择文章封面！\");\r\n        // 4. TODO：发布文章\r\n        // 创建 FormData 对象\r\n        const fd = new FormData();\r\n        // 向 FormData 中追加数据\r\n        Object.keys(this.pubForm).forEach((key) => {\r\n          fd.append(key, this.pubForm[key]);\r\n        });\r\n        // 发起请求\r\n        const { data: res } = await uploadArticleAPI(fd);\r\n        if (res.code !== 0) return this.$message.error(res.message);\r\n        this.$message.success(\"发布文章成功！\");\r\n        // 关闭对话框\r\n        this.dialogVisible = false;\r\n        // 重新请求刷新文章列表\r\n        this.initArtcles();\r\n        location.reload()\r\n      });\r\n    },\r\n    // 手动监听富文本输入框\r\n    contentChangeFn() {\r\n      this.$refs.pubFormRef.validateField(\"content\");\r\n    },\r\n    // 获取文章数据\r\n    async initArtcles() {\r\n      const { data: res } = await getArtclesAPI(this.formData);\r\n      this.artcles = res;\r\n    },\r\n    // 每条页数改变时触发,sizes当前需要每页展示的条数\r\n    handleSizeChange(sizes){\r\n      this.formData.pagenum = 1\r\n      this.initArtcles(this.formData)\r\n    },\r\n    // 当前页码改变时触发,nowpage 当前要看到的第几页\r\n    handleCurrentChange(nowpage){\r\n      this.initArtcles(this.formData)\r\n    },\r\n    // 筛选按钮点击事件\r\n    filterFn(){\r\n      // 使数据回到第一页五条数据\r\n      this.formData.pagenum = 1\r\n      this.formData.pagesize = 5\r\n      this.initArtcles()\r\n    },\r\n    // 重置按钮点击事件\r\n    resetFn(){\r\n      this.formData.pagenum = 1\r\n      this.formData.pagesize = 5\r\n      this.formData.cate_id = ''\r\n      this.formData.state = ''\r\n      this.initArtcles()\r\n    },\r\n    //查询文章详情\r\n    async artcleDetail(id){\r\n        const {data:res} = await getArtcleDetailAPI(id)\r\n        if(res.code !== 0) return this.$message.error(res.message)\r\n        this.detailVisible = true\r\n        this.detailArtcle = res.data\r\n    },\r\n    // 删除文章\r\n    async deleteArtcle(id){\r\n      const {data} = await deleteArtcleAPI(id)\r\n      if(data.code !== 0 ) return this.$message.error(data.message)\r\n      this.$message.success(data.message)\r\n      if(this.artcles.data.length === 1){\r\n        if(this.formData.pagenum > 1){\r\n          this.formData.pagenum--\r\n        }\r\n      }\r\n      this.initArtcles()\r\n    }\r\n  },\r\n  created() {\r\n    // 加载文章分类数据\r\n    this.getArtcleList();\r\n    // 加载文章数据\r\n    this.initArtcles();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n::v-deep .ql-editor {\r\n  min-height: 240px;\r\n}\r\n.container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  height: 40px;\r\n}\r\n.el-dialog {\r\n  .el-form {\r\n    .top {\r\n      display: flex;\r\n      justify-content: space-around;\r\n      .right {\r\n        width: 600px;\r\n        position: relative;\r\n        .btns {\r\n          position: absolute;\r\n          bottom: 35px;\r\n          right: 0;\r\n        }\r\n      }\r\n      .left {\r\n        input {\r\n          display: none;\r\n        }\r\n        img {\r\n          cursor: pointer;\r\n          width: 400px;\r\n          height: 280px;\r\n          overflow: hidden;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.detail{\r\n  ::v-deep .el-dialog__body{\r\n    padding: 0 10px 20px 10px;\r\n  }\r\n  h1{\r\n    text-align: center;\r\n    font-size:30px;\r\n    font-weight: bold;\r\n    margin: 0 0 10px 0;\r\n  }\r\n  span{\r\n    margin-left: 10px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./artList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./artList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./artList.vue?vue&type=template&id=1eb4afaf&scoped=true&\"\nimport script from \"./artList.vue?vue&type=script&lang=js&\"\nexport * from \"./artList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./artList.vue?vue&type=style&index=0&id=1eb4afaf&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eb4afaf\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","slot","_v","staticClass","ref","formData","model","value","cate_id","callback","$$v","$set","expression","_l","ArtcleList","item","key","id","cate_name","state","on","filterFn","resetFn","$event","dialogVisible","artcles","data","scopedSlots","_u","fn","scope","artcleDetail","row","_s","title","$formatDate","pub_date","deleteArtcle","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","handleClose","dialogCloseFn","pubForm","pubFormRules","require","selCover","chooseCover","operationFn","contentChangeFn","content","detailVisible","detailArtcle","nickname","username","baseURL","cover_img","domProps","staticRenderFns","name","required","message","trigger","min","max","methods","confirmButtonText","cancelButtonText","type","catch","err","done","Object","fd","location","created","component"],"sourceRoot":""}